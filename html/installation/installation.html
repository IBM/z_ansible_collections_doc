

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Installation &mdash; Red Hat Ansible Certified Content for IBM Z  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Playbooks" href="../playbooks/playbooks.html" />
    <link rel="prev" title="Managed node" href="../ibm_zosmf/docs/source/requirements_managed.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Red Hat Ansible Certified Content for IBM Z
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../requirements/requirements.html">Requirements</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">Ansible Galaxy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#fresh-installation">Fresh installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#overriding-an-existing-installation">Overriding an existing installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installing-a-pre-release-version">Installing a pre-release version</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#automation-hub-and-private-galaxy-server">Automation Hub and Private Galaxy server</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id3">Local build</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../playbooks/playbooks.html">Playbooks</a></li>
</ul>
<p class="caption"><span class="caption-text">Ansible Content</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../zhmc-ansible-modules/docs/ansible_content.html">Beta - Z HMC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ibm_zos_core/docs/ansible_content.html">z/OS core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ibm_zos_cics/docs/ansible_content.html">z/OS CICS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ibm_zos_ims/docs/ansible_content.html">z/OS IMS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ibm_zos_sysauto/docs/ansible_content.html">z/OS Sys Auto</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ibm_zosmf/docs/ansible_content.html">z/OS z/OSMF</a></li>
</ul>
<p class="caption"><span class="caption-text">Release Notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../release/release.html">Releases</a></li>
</ul>
<p class="caption"><span class="caption-text">FAQs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../faqs/faqs.html">Installation, versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faqs/faqs.html#modules-playbooks">Modules, Playbooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faqs/faqs.html#troubleshooting-messages">Troubleshooting, Messages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faqs/faqs.html#community">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faqs/faqs.html#others">Others</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/documentation.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/community.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/helpful_links.html">Helpful Links</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Red Hat Ansible Certified Content for IBM Z</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Installation</li>
    
    

  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<p>Collections are a distribution format for prepackaged Ansible content including
playbooks, roles, modules, and plugins that enable you to quickly set up your
automation project. Collections are hosted and available for installation from
Ansible Galaxy.</p>
<p>Before you install a collection, review the <a class="reference external" href="https://ibm.github.io/z_ansible_collections_doc/requirements/requirements.html">requirements</a> to learn about any
dependencies and determine the appropriate installation option.</p>
<p>You can install a <strong>Red Hat® Ansible® Certified Content for IBM Z® collection</strong>
using one of these options:</p>
<ul class="simple">
<li><p><a class="reference external" href="installation.html#ansible-galaxy">Ansible Galaxy</a></p></li>
<li><p><a class="reference external" href="installation.html#automation-hub-and-private-galaxy-server">Ansible Automation Hub</a></p></li>
<li><p><a class="reference external" href="installation.html#id3">Local build</a></p></li>
</ul>
<p>For more information on installing collections, see <a class="reference external" href="https://docs.ansible.com/ansible/latest/user_guide/collections_using.html">using collections</a>.</p>
<div class="section" id="id1">
<h2>Ansible Galaxy<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>Ansible Galaxy enables you to quickly configure your automation project with
content from the Ansible community. Ansible Galaxy provides prepackaged units of
work known as collections. You can use the <a class="reference external" href="https://docs.ansible.com/ansible/latest/cli/ansible-galaxy.html">ansible-galaxy</a> command with
the <code class="docutils literal notranslate"><span class="pre">install</span></code> option to install a collection on your system, also referred to
as the control node.</p>
<p>Collections are installed using the <strong>ibm</strong> namespace followed by the collection
name. Collection names can be placed under the section labeled
<strong>Ansible Content</strong>. For example, <code class="docutils literal notranslate"><span class="pre">ibm_zos_core</span></code>, <code class="docutils literal notranslate"><span class="pre">ibm_zos_ims</span></code>,
<code class="docutils literal notranslate"><span class="pre">ibm_zos_cics</span></code>, <code class="docutils literal notranslate"><span class="pre">ibm_zhmc</span></code> and <code class="docutils literal notranslate"><span class="pre">ibm_zos_sysauto</span></code> are collection names
and the installation command would follow this syntax:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ ansible-galaxy collection install &lt;namespace&gt;.&lt;collection name&gt;
</pre></div>
</div>
<p>You can install an Ansible collection in one of these ways:</p>
<div class="section" id="fresh-installation">
<h3>Fresh installation<a class="headerlink" href="#fresh-installation" title="Permalink to this headline">¶</a></h3>
<p>By default, the <a class="reference external" href="https://docs.ansible.com/ansible/latest/cli/ansible-galaxy.html">ansible-galaxy</a> command installs the latest available
collection. If you would like to install a previous version of a collection or if
the installation is unsuccessful, use the <code class="docutils literal notranslate"><span class="pre">--force</span></code> option to override an existing
installation or use a range identifier to install a specific version.</p>
<p>Use this command for a fresh installation:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ ansible-galaxy collection install ibm.&lt;collection name&gt;
</pre></div>
</div>
</div>
<div class="section" id="overriding-an-existing-installation">
<h3>Overriding an existing installation<a class="headerlink" href="#overriding-an-existing-installation" title="Permalink to this headline">¶</a></h3>
<p>If you want to override a previously installed version of a collection, use the
<code class="docutils literal notranslate"><span class="pre">--force</span></code> option.</p>
<p>Use this command to override an existing version:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ ansible-galaxy collection install --force ibm.&lt;collection name&gt;
</pre></div>
</div>
</div>
<div class="section" id="installing-a-pre-release-version">
<h3>Installing a pre-release version<a class="headerlink" href="#installing-a-pre-release-version" title="Permalink to this headline">¶</a></h3>
<p>A pre-release version of a collection is denoted by appending a hyphen and a series of
dot separated identifiers immediately following the patch version.
<strong>IBM Z collections</strong> follow <a class="reference external" href="https://semver.org/">semantic versioning</a> that includes a pre-release
naming convention that requires a range identifier. For example, <strong>1.1.0-beta.1</strong>.
The <a class="reference external" href="https://docs.ansible.com/ansible/latest/cli/ansible-galaxy.html">ansible-galaxy</a> command ignores any <strong>pre-release</strong> versions unless
the identifier is set to that pre-release version.</p>
<p>Here is an example command to install a pre-release version of a collection:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ ansible-galaxy collection install ibm.&lt;collection name&gt;:1.1.0-beta.1
</pre></div>
</div>
<p>By default, all collections are installed in <code class="docutils literal notranslate"><span class="pre">~/.ansible/collections</span></code>. You can
use the <cite>-p</cite> option with <cite>ansible-galaxy</cite> to specify an installation path such as:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ ansible-galaxy collection install ibm.&lt;collection name&gt; -p /home/ansible/collections
</pre></div>
</div>
<p>The progress of the installation is output to the console:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>Process install dependency map
Starting collection install process
Installing <span class="s1">&#39;ibm.&lt;collection name&gt;:1.0.0&#39;</span> to <span class="s1">&#39;/Users/user/.ansible/collections/ansible_collections/ibm/&lt;collection name&gt;  &#39;</span>
</pre></div>
</div>
<p>For more information on installing collections with Ansible Galaxy,
see <a class="reference external" href="https://docs.ansible.com/ansible/latest/user_guide/collections_using.html#installing-collections-with-ansible-galaxy">installing collections</a>.</p>
</div>
</div>
<div class="section" id="automation-hub-and-private-galaxy-server">
<h2>Automation Hub and Private Galaxy server<a class="headerlink" href="#automation-hub-and-private-galaxy-server" title="Permalink to this headline">¶</a></h2>
<p>Configuring access to a private Galaxy server follows the same procedure
that you would use to configure your client to point to Automation Hub.
You can use the <a class="reference external" href="https://docs.ansible.com/ansible/latest/cli/ansible-galaxy.html">ansible-galaxy</a> command with the <code class="docutils literal notranslate"><span class="pre">install</span></code> option to
install a collection on the control node hosted in Automation Hub or a private
Galaxy server.</p>
<p>By default, the <code class="docutils literal notranslate"><span class="pre">ansible-galaxy</span></code> command is configured to access
<code class="docutils literal notranslate"><span class="pre">https://galaxy.ansible.com</span></code> as the server when you install a
collection. The <cite>ansible-galaxy</cite> client can be configured to point to Ansible
Automation Hub or other servers, such as a privately running Galaxy server, by
configuring the server list in the <code class="docutils literal notranslate"><span class="pre">ansible.cfg</span></code> file. Ansible searches for
<code class="docutils literal notranslate"><span class="pre">ansible.cfg</span></code> in the following locations in this order:</p>
<blockquote>
<div><ul class="simple">
<li><p>ANSIBLE_CONFIG (environment variable if set)</p></li>
<li><p>ansible.cfg (in the current directory)</p></li>
<li><p>~/.ansible.cfg (in the home directory)</p></li>
<li><p>/etc/ansible/ansible.cfg</p></li>
</ul>
</div></blockquote>
<p>To configure a Galaxy server list in the ansible.cfg file:</p>
<blockquote>
<div><ul class="simple">
<li><p>Add the server_list option under the [galaxy] section to one or more
server names.</p></li>
<li><p>Create a new section for each server name.</p></li>
<li><p>Set the url option for each server name.</p></li>
</ul>
</div></blockquote>
<p>For Automation Hub, you additionally need to:</p>
<blockquote>
<div><ul class="simple">
<li><p>Set the auth_url option for each server name.</p></li>
<li><p>Set the API token for each server name. For more information on API tokens,
see <a class="reference external" href="https://cloud.redhat.com/ansible/automation-hub/token/">Get API token from the version dropdown to copy your API token</a>.</p></li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When hosting a private Galaxy server or pointing to Hub, available content may not
be always consistent with what is available on Ansible Galaxy server.</p>
</div>
<p>The following example shows a configuration for Automation Hub, a private
running Galaxy server, and Galaxy:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">[</span><span class="nv">galaxy</span><span class="p p-Indicator">]</span>
<span class="l l-Scalar l-Scalar-Plain">server_list = automation_hub, galaxy, private_galaxy</span>

<span class="l l-Scalar l-Scalar-Plain">[galaxy_server.automation_hub]</span>
<span class="l l-Scalar l-Scalar-Plain">url=https://cloud.redhat.com/api/automation-hub/</span>
<span class="l l-Scalar l-Scalar-Plain">auth_url=https://sso.redhat.com/auth/realms/redhat-external/protocol/openid-connect/token</span>
<span class="l l-Scalar l-Scalar-Plain">token=&lt;hub_token&gt;</span>

<span class="l l-Scalar l-Scalar-Plain">[galaxy_server.galaxy]</span>
<span class="l l-Scalar l-Scalar-Plain">url=https://galaxy.ansible.com/</span>

<span class="l l-Scalar l-Scalar-Plain">[galaxy_server.private_galaxy]</span>
<span class="l l-Scalar l-Scalar-Plain">url=https://galaxy-dev.ansible.com/</span>
<span class="l l-Scalar l-Scalar-Plain">token=&lt;private_token&gt;</span>
</pre></div>
</div>
<p>For more configuration information, see
<a class="reference external" href="https://docs.ansible.com/ansible/latest/user_guide/collections_using.html#configuring-the-ansible-galaxy-client">configuring the ansible-galaxy client</a> and <a class="reference external" href="https://docs.ansible.com/ansible/latest/reference_appendices/config.html">Ansible Configuration Settings</a>.</p>
</div>
<div class="section" id="id3">
<h2>Local build<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">ansible-galaxy</span> <span class="pre">collection</span> <span class="pre">install</span></code> command to install a
collection built from source. To build your own collection, you must clone the
Git repository, build the collection archive, and install the collection. The
<code class="docutils literal notranslate"><span class="pre">ansible-galaxy</span> <span class="pre">collection</span> <span class="pre">build</span></code> command packages the collection into an
archive that can later be installed locally without having to use Hub or
Galaxy.</p>
<p>To build a collection from the Git repository:</p>
<blockquote>
<div><ol class="arabic">
<li><p>Choose and <a class="reference external" href="https://git-scm.com/book/en/v2/Git-Basics-Getting-a-Git-Repository">git clone</a> a collection repository:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ git clone git@github.com:&lt;path/to/repository&gt;/&lt;collection name&gt;.git
</pre></div>
</div>
</li>
<li><p>Build the collection by running the <code class="docutils literal notranslate"><span class="pre">ansible-galaxy</span> <span class="pre">collection</span> <span class="pre">build</span></code>
command, which must be run from inside the collection.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> &lt;collection name&gt;
ansible-galaxy collection build
</pre></div>
</div>
<p>Example output of a locally built collection:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ ansible-galaxy collection build
Created collection <span class="k">for</span> ibm.&lt;collection name&gt; at /Users/user/git/ibm/zos-ansible/&lt;collection name&gt;/&lt;collection name&gt;-1.0.0.tar.gz
</pre></div>
</div>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>Collection archive names will change depending on the release version. The
names adhere to this convention:</p>
<blockquote>
<div><p><strong>&lt;namespace&gt;-&lt;collection&gt;-&lt;version&gt;.tar.gz</strong>, for example, <strong>ibm-ibm_zos_core-1.0.0.tar.gz</strong></p>
</div></blockquote>
</li>
<li><p>If you build a collection with Ansible version 2.9 or earlier, you may see the following warning that you can ignore:</p>
<blockquote>
<div><p><strong>[WARNING]: Found unknown keys in collection galaxy.yml at ‘/Users/user/git/ibm/zos-ansible/&lt;collection name&gt;/galaxy.yml’: build_ignore</strong></p>
</div></blockquote>
</li>
</ul>
</div>
<ol class="arabic" start="3">
<li><p>Install the locally built collection:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ ansible-galaxy collection install ibm-&lt;collection name&gt;-1.0.0.tar.gz
</pre></div>
</div>
<p>In the output of collection installation, note the installation path to access the sample playbook:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>Process install dependency map
Starting collection install process
Installing <span class="s1">&#39;ibm.&lt;collection name&gt;:1.0.0&#39;</span> to <span class="s1">&#39;/Users/user/.ansible/collections/ansible_collections/ibm/&lt;collection name&gt;&#39;</span>
</pre></div>
</div>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">-p</span></code> option with <code class="docutils literal notranslate"><span class="pre">ansible-galaxy</span></code> to specify the
installation path. For example,``ansible-galaxy collection install ibm-&lt;collection name&gt;-1.0.0.tar.gz -p /home/ansible/collections``.</p>
<p>For more information, see <a class="reference external" href="https://docs.ansible.com/ansible/latest/user_guide/collections_using.html#installing-collections-with-ansible-galaxy">installing collections with Ansible Galaxy</a>.</p>
</li>
</ol>
</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright IBM Corporation 2020, 2021

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>