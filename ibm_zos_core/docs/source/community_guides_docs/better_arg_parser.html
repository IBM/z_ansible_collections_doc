

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Features &mdash; Red Hat Ansible Certified Content for IBM Z  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/my_theme.css?v=a0fc712e" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-design.min.css?v=95c83b7e" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/table.css?v=fdc28d34" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/custom.css?v=4182aadc" />

  
      <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../../../../_static/doctools.js?v=9a2dae69"></script>
      <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../../../_static/copybutton.js?v=f281be69"></script>
      <script src="../../../../_static/design-tabs.js?v=f930bc37"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Contributing" href="../../../../ibm_zos_ims/docs/source/community_guides.html" />
    <link rel="prev" title="Prerequisites" href="zos_ansible_module_testing.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            Red Hat Ansible Certified Content for IBM Z
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../overview/ansible-for-ibm-z.html">Ansible for IBM Z</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../overview/ansible-glossary.html">Ansible for IBM Z Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../overview/ansible-playbooks.html">Ansible for IBM Z Playbooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../overview/ansible-for-ztrial.html">Ansible for IBM Z Trial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation &amp; Execution</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../requirements/software-requirements.html">Software Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../installation/software-installation.html">Software Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../configuration/software-configuration.html">Software Configuration</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Collections &amp; Content</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../collections_content/collections.html">Collections  <svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-rocket" viewBox="0 0 16 16" aria-hidden="true"><path d="M14.064 0h.186C15.216 0 16 .784 16 1.75v.186a8.752 8.752 0 0 1-2.564 6.186l-.458.459c-.314.314-.641.616-.979.904v3.207c0 .608-.315 1.172-.833 1.49l-2.774 1.707a.749.749 0 0 1-1.11-.418l-.954-3.102a1.214 1.214 0 0 1-.145-.125L3.754 9.816a1.218 1.218 0 0 1-.124-.145L.528 8.717a.749.749 0 0 1-.418-1.11l1.71-2.774A1.748 1.748 0 0 1 3.31 4h3.204c.288-.338.59-.665.904-.979l.459-.458A8.749 8.749 0 0 1 14.064 0ZM8.938 3.623h-.002l-.458.458c-.76.76-1.437 1.598-2.02 2.5l-1.5 2.317 2.143 2.143 2.317-1.5c.902-.583 1.74-1.26 2.499-2.02l.459-.458a7.25 7.25 0 0 0 2.123-5.127V1.75a.25.25 0 0 0-.25-.25h-.186a7.249 7.249 0 0 0-5.125 2.123ZM3.56 14.56c-.732.732-2.334 1.045-3.005 1.148a.234.234 0 0 1-.201-.064.234.234 0 0 1-.064-.201c.103-.671.416-2.273 1.15-3.003a1.502 1.502 0 1 1 2.12 2.12Zm6.94-3.935c-.088.06-.177.118-.266.175l-2.35 1.521.548 1.783 1.949-1.2a.25.25 0 0 0 .119-.213ZM3.678 8.116 5.2 5.766c.058-.09.117-.178.176-.266H3.309a.25.25 0 0 0-.213.119l-1.2 1.95ZM12 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path></svg></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../collections_content/collection-releases.html">Collection Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../collections_content/collection-life-cycles.html">Collection Life Cycles</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Help &amp; Troubleshooting</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../help/getting-support.html">Getting Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../help/faqs.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../help/helpful-links.html">Helpful links</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contribution</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../../contribution/contributing.html">Contributing</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../community_guides.html">z/OS Core</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../community_guides.html#development">Development</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../community_guides.html#z-os-ansible-module-testing">z/OS Ansible Module Testing</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../community_guides.html#parsing-with-betterargparser">Parsing with BetterArgParser</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../ibm_zos_ims/docs/source/community_guides.html">z/OS IMS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../zhmc-ansible-modules/docs/source/development.html">Z HMC</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Red Hat Ansible Certified Content for IBM Z</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../contribution/contributing.html">Contributing</a></li>
          <li class="breadcrumb-item"><a href="../community_guides.html">Contributing</a></li>
      <li class="breadcrumb-item active">Features</li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="features">
<h1>Features<a class="headerlink" href="#features" title="Link to this heading"></a></h1>
<p>BetterArgParser is a parser designed to validate values often used on z/OS to
avoid unnecessary failures on the target such as incorrectly providing a
data set name or type. It acts as an alternative to parsers such as argparse
and includes the following features:</p>
<ul class="simple">
<li><p>Arguments dependencies on other arguments</p></li>
<li><p>Multiple levels of nested arguments (dict of dict, list of dict, dict of
lists, etc.)</p></li>
<li><p>Type checking and modification</p></li>
<li><p>Default value handling</p></li>
<li><p>Required arguments</p></li>
<li><p>Providing list of valid choices</p></li>
<li><p>Argument aliases</p></li>
<li><p>Custom functions for type checking, defaults, and required arguments.</p></li>
<li><p>Can leverage contents of arguments specified as dependencies.</p></li>
</ul>
</section>
<section id="importing-betterargparser">
<h1>Importing BetterArgParser<a class="headerlink" href="#importing-betterargparser" title="Link to this heading"></a></h1>
<p>If the <code class="docutils literal notranslate"><span class="pre">better_arg_parser.py</span></code> is present in the <em>module_utils/</em> directory, you
can import it in the imports section of module with this example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">ansible.module_utils.better_arg_parser</span><span class="w"> </span><span class="kn">import</span> <span class="n">BetterArgParser</span>
</pre></div>
</div>
</section>
<section id="defining-arguments">
<h1>Defining Arguments<a class="headerlink" href="#defining-arguments" title="Link to this heading"></a></h1>
<p>Arguments need to be defined to the parser before the parser can begin
processing argument contents.</p>
<p>The parser expects to receive a Python dictionary where:</p>
<ul class="simple">
<li><p>key = the name of the argument</p></li>
<li><p>value = a second dictionary containing configuration options for the argument</p></li>
</ul>
</section>
<section id="argument-options">
<h1>Argument Options<a class="headerlink" href="#argument-options" title="Link to this heading"></a></h1>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Options</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>arg_type</p></td>
<td><p>str or function</p></td>
<td><p>The expected type of the argument.</p></td>
<td><p>False</p></td>
<td><p>‘str’</p></td>
<td><p>‘str’, ‘int’, ‘bool’, ‘list’, ‘dict’, or user defined function</p></td>
</tr>
<tr class="row-odd"><td><p>required</p></td>
<td><p>bool</p></td>
<td><p>Determines if the parameter must be provided. If default is set, required is unnecessary.</p></td>
<td><p>False</p></td>
<td><p>False</p></td>
<td><p>True, False, or user defined function</p></td>
</tr>
<tr class="row-even"><td><p>default</p></td>
<td><p>any</p></td>
<td><p>The default value to be used when none is provided.</p></td>
<td><p>False</p></td>
<td><p>None</p></td>
<td><p>any, including user defined function</p></td>
</tr>
<tr class="row-odd"><td><p>aliases</p></td>
<td><p>list[str]</p></td>
<td><p>A list of any alternative names to be used for the argument.</p></td>
<td><p>False</p></td>
<td><p>[]</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p>choices</p></td>
<td><p>list</p></td>
<td><p>A list of choices accepted by the argument.</p></td>
<td><p>False</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p>elements</p></td>
<td><p>str</p></td>
<td><p>When arg_type=’list’, elements specifies the expected type of the items in the list.</p></td>
<td><p>True when arg_type=’list’</p></td>
<td><p>N/A</p></td>
<td><p>‘str’, ‘int’, ‘bool’, ‘list’, ‘dict’, or user defined function</p></td>
</tr>
<tr class="row-even"><td><p>options</p></td>
<td><p>dict</p></td>
<td><p>When arg_type=’dict’ or (arg_type=’list’ and elements=’dict’), options is used to define a nested set of arguments.</p></td>
<td><p>True when arg_type=’dict’ or (arg_type=’list’ and elements=’dict’)</p></td>
<td><p>N/A</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p>dependencies</p></td>
<td><p>list[str]</p></td>
<td><p>A list containing any other arguments needed during parsing of the current argument.
Any dependent arguments will be parsed first and their contents passed to any custom functions
provided for arg_type, required, and default. Dependencies can only exist for arguments of the same depth.</p></td>
<td><p>False</p></td>
<td><p>[]</p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p>mutually_exclusive</p></td>
<td><p>list[list[str]]</p></td>
<td><p>A list containing lists of mutually exclusive arguments. If two or more mutually exclusive arguments are
provided at runtime, the parser will raise an exception. This should be placed  at the same level as
arguments, not inside of an arguments option list.</p></td>
<td><p>False</p></td>
<td><p>[]</p></td>
<td><p>N/A</p></td>
</tr>
</tbody>
</table>
<p>Example argument definition:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># argument definition dictionary</span>
<span class="n">arg_defs</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
    <span class="c1"># argument depth = 1</span>

    <span class="c1"># first argument named &quot;person&quot;</span>
    <span class="n">person</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="c1"># &quot;person&quot; contains a nested dictionary</span>
        <span class="c1"># containing more arguments</span>
        <span class="n">arg_type</span><span class="o">=</span><span class="s1">&#39;dict&#39;</span><span class="p">,</span>
        <span class="n">options</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
            <span class="c1"># argument depth = 2</span>

            <span class="c1"># if no &quot;name&quot; provided,</span>
            <span class="c1"># &quot;name&quot; will be set to &quot;testname&quot;</span>
            <span class="n">name</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                <span class="n">arg_type</span><span class="o">=</span><span class="s1">&#39;str&#39;</span><span class="p">,</span>
                <span class="n">default</span><span class="o">=</span><span class="s1">&#39;testname&#39;</span>
            <span class="p">),</span>
            <span class="c1"># if &quot;age&quot; not set that is fine</span>
            <span class="n">age</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                <span class="n">arg_type</span><span class="o">=</span><span class="s1">&#39;int&#39;</span><span class="p">,</span>
                <span class="n">required</span><span class="o">=</span><span class="kc">False</span>
            <span class="p">),</span>
            <span class="c1"># &quot;address&quot; is another nested dict of arguments</span>
            <span class="n">address</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                <span class="n">arg_type</span><span class="o">=</span><span class="s1">&#39;dict&#39;</span><span class="p">,</span>
                <span class="n">options</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                    <span class="c1"># argument depth = 3</span>

                    <span class="n">street</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                        <span class="n">arg_type</span><span class="o">=</span><span class="s1">&#39;str&#39;</span>
                    <span class="p">),</span>
                    <span class="n">number</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                        <span class="n">arg_type</span><span class="o">=</span><span class="s1">&#39;int&#39;</span>
                    <span class="p">),</span>
                    <span class="n">city</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
                        <span class="n">arg_type</span><span class="o">=</span><span class="s1">&#39;str&#39;</span><span class="p">,</span>
                        <span class="n">default</span><span class="o">=</span><span class="s1">&#39;San Jose&#39;</span>
                    <span class="p">)</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>This argument definition would be used as in the following example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">parser</span> <span class="o">=</span> <span class="n">BetterArgParser</span><span class="p">(</span><span class="n">arg_defs</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">({</span>
    <span class="s1">&#39;person&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;blake&#39;</span><span class="p">,</span>
        <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">23</span><span class="p">,</span>
        <span class="s1">&#39;address&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;street&#39;</span><span class="p">:</span> <span class="s1">&#39;bailey ave&#39;</span><span class="p">,</span>
            <span class="s1">&#39;number&#39;</span><span class="p">:</span> <span class="mi">555</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">})</span>
</pre></div>
</div>
<p>The contents of result for the example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;person&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;blake&#39;</span><span class="p">,</span>
        <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">23</span><span class="p">,</span>
        <span class="s1">&#39;address&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;street&#39;</span><span class="p">:</span> <span class="s1">&#39;bailey ave&#39;</span><span class="p">,</span>
            <span class="s1">&#39;number&#39;</span><span class="p">:</span> <span class="mi">555</span><span class="p">,</span>
            <span class="s1">&#39;city&#39;</span><span class="p">:</span> <span class="s1">&#39;San Jose&#39;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="built-in-argument-types-arg-type-types">
<h1>Built-in Argument Types (<em>arg_type</em> types)<a class="headerlink" href="#built-in-argument-types-arg-type-types" title="Link to this heading"></a></h1>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Example(s)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>dict</p></td>
<td><p>An argument container type. Expects to be provided an <a class="reference external" href="better_arg_parser.html#argument-options">options argument</a>.</p></td>
<td><p>N/A / Complex</p></td>
</tr>
<tr class="row-odd"><td><p>list</p></td>
<td><p>An argument container type. Either expects to be provided an <a class="reference external" href="better_arg_parser.html#argument-options">elements argument</a>
where the element type is one of the built-in argument types or a <a class="reference external" href="better_arg_parser.html#custom-function-arg-type">custom function type</a>.</p></td>
<td><p>N/A / Complex</p></td>
</tr>
<tr class="row-even"><td><p>str</p></td>
<td><p>Expects to receive a string.</p></td>
<td><p><cite>“Hello World”</cite></p></td>
</tr>
<tr class="row-odd"><td><p>bool</p></td>
<td><p>Expects to receive a boolean.</p></td>
<td><p><cite>True</cite> or <cite>False</cite></p></td>
</tr>
<tr class="row-even"><td><p>int</p></td>
<td><p>Expects to receive an integer or a string containing only numeric characters. Returns an integer.</p></td>
<td><p><cite>12345</cite>, <cite>“12345”</cite></p></td>
</tr>
<tr class="row-odd"><td><p>path</p></td>
<td><p>Expects to receive a valid absolute filesystem path. Only format is checked, provided path is not checked for existence.</p></td>
<td><p><cite>“/usr/lpp/rsusr/bin/ported”</cite></p></td>
</tr>
<tr class="row-even"><td><p>data_set</p></td>
<td><p>Expects to receive a valid data set name, with or without a PDS member. Case insensitive.</p></td>
<td><p><cite>“USER.PRIVATE.PROCLIB”</cite>, <cite>“user.private.proclib”</cite>, <cite>“user.private.jobs(runthing)”</cite></p></td>
</tr>
<tr class="row-odd"><td><p>data_set_base</p></td>
<td><p>Expects to receive a valid data set name without a PDS member. Case insensitive.</p></td>
<td><p><cite>“USER.PRIVATE.PROCLIB”</cite>, <cite>“user.private.proclib”</cite></p></td>
</tr>
<tr class="row-even"><td><p>data_set_member</p></td>
<td><p>Expects to receive a valid data set name with PDS member. Case insensitive.</p></td>
<td><p><cite>“user.private.jobs(runthing)”</cite></p></td>
</tr>
<tr class="row-odd"><td><p>data_set_or_path</p></td>
<td><p>A combination of <em>data_set</em> and <em>path</em> argument types. Case insensitive.</p></td>
<td><p><cite>“/usr/lpp/rsusr/bin/ported”</cite>, <cite>“USER.PRIVATE.PROCLIB”</cite>, <cite>“user.private.proclib”</cite>, <cite>“user.private.jobs(runthing)”</cite></p></td>
</tr>
<tr class="row-even"><td><p>qualifier</p></td>
<td><p>Expects to receive ONE valid qualifier for a data set name.</p></td>
<td><p><cite>“USER”</cite>, <cite>“PRIVATE”</cite>, <cite>“procl8b”</cite></p></td>
</tr>
<tr class="row-odd"><td><p>qualifier_pattern</p></td>
<td><p>Expects to receive ONE valid qualifier search pattern (ends with <cite>*</cite>) for a data set name.</p></td>
<td><p><cite>“US*”</cite>, <cite>“PRIVAT*”</cite></p></td>
</tr>
<tr class="row-even"><td><p>volume</p></td>
<td><p>Expects to receive a valid volume serial.</p></td>
<td><p><cite>“000000”</cite>, <cite>“SCR013”</cite></p></td>
</tr>
<tr class="row-odd"><td><p>encoding</p></td>
<td><p>Expects not to receive any characters which are not present in currently available encoding types.
Does not verify encoding type actually exists.</p></td>
<td><p><cite>“UTF-8”</cite>, <cite>“IBM-1047”</cite></p></td>
</tr>
</tbody>
</table>
</section>
<section id="custom-functions">
<h1>Custom Functions<a class="headerlink" href="#custom-functions" title="Link to this heading"></a></h1>
<p>In situations where complex operations have to be performed, defining a custom
function is recommended. Custom functions can be used in place of other options
when defining an argument. Custom functions must meet different requirements
depending on their usage.</p>
<p><strong>Requirements for All Custom Functions</strong></p>
<p>The function must have two parameters:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p><strong>Parameter 1</strong> - The contents of the argument currently being parsed</p></li>
<li><p><strong>Parameter 2</strong> - A dictionary containing resolved dependencies specified
during argument definition</p></li>
<li><p><strong>Parameter 3 (optional)</strong> - A dictionary containing any custom arguments
defined. See <a class="reference external" href="better_arg_parser.html#id1">custom argument options</a>.</p></li>
</ol>
</div></blockquote>
<p>Both arguments 1 and 2 are required regardless of whether or not they are used.</p>
<section id="custom-function-arg-type">
<h2>Custom Function: arg_type<a class="headerlink" href="#custom-function-arg-type" title="Link to this heading"></a></h2>
<p><strong>Raises:</strong> If the argument is to be considered invalid, the function should
raise a <em>ValueError</em> exception. This will halt program execution.</p>
<p><strong>Returns:</strong> The function should return the contents of the argument after any
necessary operations and validation.</p>
</section>
<section id="custom-function-required">
<h2>Custom Function: required<a class="headerlink" href="#custom-function-required" title="Link to this heading"></a></h2>
<p><strong>Returns:</strong> The function should return <strong>True</strong> or <strong>False</strong> depending on whether
the argument is required.</p>
</section>
<section id="custom-function-default">
<h2>Custom Function: default<a class="headerlink" href="#custom-function-default" title="Link to this heading"></a></h2>
<p><strong>Returns:</strong> The updated contents of the argument with any default value, if desired.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">uppercase_string</span><span class="p">(</span><span class="n">contents</span><span class="p">,</span> <span class="n">dependencies</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">contents</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;The provided contents </span><span class="si">{}</span><span class="s1"> are not a valid string type.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">contents</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">contents</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>

<span class="n">arg_defs</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>

    <span class="n">name</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="n">arg_type</span><span class="o">=</span><span class="n">uppercase_string</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">BetterArgParser</span><span class="p">(</span><span class="n">arg_defs</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">({</span>
    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;blake&#39;</span>
<span class="p">})</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;BLAKE&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="id1">
<h1>Custom Argument Options<a class="headerlink" href="#id1" title="Link to this heading"></a></h1>
<p>BetterArgParser is designed to allow user provided argument options as long as the new option name does not overlap with any <a class="reference external" href="better_arg_parser.html#argument-options">reserved option names</a>.</p>
<p>Custom options are meant to be used with <a class="reference external" href="better_arg_parser.html#custom-functions">custom functions</a>.</p>
<p>Custom Argument Option Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">special_names_get_uppercase</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">dependencies</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;special_names&quot;</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">value</span>

<span class="n">arg_defs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="n">arg_type</span><span class="o">=</span><span class="n">special_names_get_uppercase</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;samplename&quot;</span><span class="p">,</span>
        <span class="n">special_names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;blake&quot;</span><span class="p">,</span> <span class="s2">&quot;demetri&quot;</span><span class="p">,</span> <span class="s2">&quot;ping&quot;</span><span class="p">,</span> <span class="s2">&quot;crystal&quot;</span><span class="p">,</span> <span class="s2">&quot;asif&quot;</span><span class="p">,</span> <span class="s2">&quot;luke&quot;</span><span class="p">],</span>
    <span class="p">),</span>
<span class="p">)</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">BetterArgParser</span><span class="p">(</span><span class="n">arg_defs</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">({</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;blake&quot;</span><span class="p">})</span>
</pre></div>
</div>
<p>The variable <strong>result</strong> would contain:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;BLAKE&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="mutually-exclusive-arguments">
<h1>Mutually Exclusive Arguments<a class="headerlink" href="#mutually-exclusive-arguments" title="Link to this heading"></a></h1>
<p>BetterArgParser supports providing lists of mutually exclusive arguments.</p>
<p>Mutually Exclusive Arguments Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">arg_defs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arg_type</span><span class="o">=</span><span class="s2">&quot;str&quot;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;samplename&quot;</span><span class="p">),</span>
    <span class="n">date</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arg_type</span><span class="o">=</span><span class="s2">&quot;str&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;may 1, 2020&quot;</span><span class="p">),</span>
    <span class="n">time</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arg_type</span><span class="o">=</span><span class="s2">&quot;int&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;3945297&quot;</span><span class="p">),</span>
    <span class="n">weather</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arg_type</span><span class="o">=</span><span class="s2">&quot;str&quot;</span><span class="p">),</span>
    <span class="n">raining</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">arg_type</span><span class="o">=</span><span class="s2">&quot;bool&quot;</span><span class="p">),</span>
    <span class="n">mutually_exclusive</span><span class="o">=</span><span class="p">[[</span><span class="s2">&quot;date&quot;</span><span class="p">,</span> <span class="s2">&quot;time&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;weather&quot;</span><span class="p">,</span> <span class="s2">&quot;raining&quot;</span><span class="p">]],</span>
<span class="p">)</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">BetterArgParser</span><span class="p">(</span><span class="n">arg_defs</span><span class="p">)</span>

<span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">({</span><span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;tuesday&quot;</span><span class="p">,</span> <span class="s2">&quot;time&quot;</span><span class="p">:</span> <span class="mi">5000</span><span class="p">})</span>
</pre></div>
</div>
<p>The above snippet would raise a <em>ValueError</em> exception because both the
<em>date</em> and <em>time</em> arguments were provided.</p>
</section>
<section id="dependent-arguments">
<h1>Dependent Arguments<a class="headerlink" href="#dependent-arguments" title="Link to this heading"></a></h1>
<p>In complex cases, arguments may need to take the contents of other arguments
into account during parsing.</p>
<p>For example,</p>
<ul class="simple">
<li><p>A parameter may only be required if a different argument has a particular
value.
* e.g. Only require <em>doctor_appointment_date</em> if <em>has_illness=True</em></p></li>
<li><p>Default values can change depending on value of another argument
* e.g. If <em>country=US</em> default for <em>currency_type</em> is <em>$</em>, if <em>country=UK</em>
default <em>currency_type</em> is <em>£</em></p></li>
</ul>
<p>The <em>dependencies</em> argument option is used to specify the dependencies of an
argument.
Dependencies will always be resolved before the argument that depends on them.</p>
<p>The resolved dependencies are passed to any custom functions defined in the
argument which has the dependencies.</p>
<p><strong>Note:</strong> Dependencies can only exist between arguments at the same depth.
In addition, dependencies cannot exist between elements in a list of dicts.</p>
</section>
<section id="dependencies-example">
<h1>Dependencies Example<a class="headerlink" href="#dependencies-example" title="Link to this heading"></a></h1>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">currency_symbol</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">dependencies</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">dependencies</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;country&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;us&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;$&#39;</span>
    <span class="k">if</span> <span class="n">dependencies</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;country&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;uk&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;£&#39;</span>
    <span class="k">return</span> <span class="s1">&#39;?&#39;</span>

<span class="n">arg_defs</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
    <span class="n">country</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="n">arg_type</span><span class="o">=</span><span class="s1">&#39;str&#39;</span><span class="p">,</span>
        <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;us&#39;</span><span class="p">,</span> <span class="s1">&#39;uk&#39;</span><span class="p">]</span>
    <span class="p">),</span>
    <span class="n">currency_symbol</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
        <span class="n">arg_type</span><span class="o">=</span><span class="s1">&#39;str&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">currency_symbol</span><span class="p">,</span>
        <span class="n">dependencies</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">]</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">BetterArgParser</span><span class="p">(</span><span class="n">arg_defs</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">({</span>
    <span class="s1">&#39;country&#39;</span><span class="p">:</span> <span class="s1">&#39;us&#39;</span>
<span class="p">})</span>
</pre></div>
</div>
<p>The variable <em>result</em> would contain:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
 <span class="s1">&#39;country&#39;</span><span class="p">:</span> <span class="s1">&#39;us&#39;</span><span class="p">,</span>
 <span class="s1">&#39;currency_symbol&#39;</span><span class="p">:</span> <span class="s1">&#39;$&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright IBM Corp. 2020, 2025.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>